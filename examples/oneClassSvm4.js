import anomaly from 'k6/x/anomaly'


export default function () {
    const trainingData = [
        // sample data from 0 to 8
        { x: 5.286721601633694, y: 7.25814045141799, Timestamp: "2021-09-01T12:00:00" },
        { x: 2.386970568627337, y: 5.718079637189474, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.415410488202138, y: 0.8650141959028268, Timestamp: "2021-09-01T12:00:00" },
        { x: 2.199707807994086, y: 7.936163545572544, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.2008777781851538, y: 4.24078212743251, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.332905931377416, y: 1.5386345244359187, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.63903945649572, y: 7.692782474278378, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.5876484535157136, y: 3.4923588452551915, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.27136858413364, y: 3.80824362747218, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.936556266769054, y: 1.4082980499070068, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.465064518287663, y: 3.716664154543741, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.2598655833796162, y: 5.044541358292385, Timestamp: "2021-09-01T12:00:00" },
        { x: 7.353812584393049, y: 1.5244202426205735, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.470649080663938, y: 6.978750588695297, Timestamp: "2021-09-01T12:00:00" },
        { x: 5.766553792546894, y: 3.931107618349806, Timestamp: "2021-09-01T12:00:00" },
        { x: 3.591834752763372, y: 5.894305898426735, Timestamp: "2021-09-01T12:00:00" },
        { x: 7.658457977640488, y: 7.310940386715439, Timestamp: "2021-09-01T12:00:00" },
        { x: 2.4273284126182855, y: 7.204225789155506, Timestamp: "2021-09-01T12:00:00" },
        { x: 7.330314880994424, y: 1.6596748568843083, Timestamp: "2021-09-01T12:00:00" },
        { x: 2.956565384079921, y: 0.1860937418595352, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.621580870989758, y: 7.083527046190996, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.684569018550556, y: 7.777146159056864, Timestamp: "2021-09-01T12:00:00" },
        { x: 0.9779836626574969, y: 5.924975730665238, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.560411644116808, y: 0.4942456619942579, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.205915781329823, y: 1.0630215825823193, Timestamp: "2021-09-01T12:00:00" },
        { x: 7.548202593229407, y: 3.8719154909553772, Timestamp: "2021-09-01T12:00:00" },
        { x: 3.7848062047450917, y: 1.5163280460743458, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.238621526311297, y: 7.1627562719239055, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.413832365210116, y: 2.6813969529069475, Timestamp: "2021-09-01T12:00:00" },
        { x: 2.565955917992957, y: 3.88070438797822, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.129030265203621, y: 6.190899484154887, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.7743814996951919, y: 5.899420030707086, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.4793546292608557, y: 1.5933604803948267, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.231363157935331, y: 0.4937562731683798, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.516328186468662, y: 6.8534310013943855, Timestamp: "2021-09-01T12:00:00" },
        { x: 2.805212088146037, y: 4.213810936966748, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.7827862729207187, y: 6.123130307240833, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.6582182046891987, y: 6.33306525753428, Timestamp: "2021-09-01T12:00:00" },
        { x: 4.081054200184038, y: 0.21116953713158892, Timestamp: "2021-09-01T12:00:00" },
        { x: 0.16193724226907769, y: 6.474114227174251, Timestamp: "2021-09-01T12:00:00" },
        { x: 0.9744089438368064, y: 2.732985047410649, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.298500544736475, y: 0.03138220299424965, Timestamp: "2021-09-01T12:00:00" },
        { x: 0.7000702579222065, y: 2.0830663063041808, Timestamp: "2021-09-01T12:00:00" },
        { x: 2.63045978875126, y: 4.544333010677686, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.4792822974515243, y: 5.184125050341207, Timestamp: "2021-09-01T12:00:00" },
        { x: 6.343190432659984, y: 7.642542464901579, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.8863649448882533, y: 1.2147931384005535, Timestamp: "2021-09-01T12:00:00" },
        { x: 0.19391642775841866, y: 6.6737594209331785, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.7547444537819903, y: 3.36399414407901, Timestamp: "2021-09-01T12:00:00" },
        { x: 5.366761178704277, y: 3.9337012692389877, Timestamp: "2021-09-01T12:00:00" },

        // sample data from 24 to 32        
        { x: 30.481948095155484, y: 30.556366406555767, Timestamp: "2021-09-01T12:00:00" },
        { x: 26.799247053258988, y: 28.322104461727825, Timestamp: "2021-09-01T12:00:00" },
        { x: 30.270091159170956, y: 29.57201284414558, Timestamp: "2021-09-01T12:00:00" },
        { x: 31.020761110868406, y: 31.764077822045053, Timestamp: "2021-09-01T12:00:00" },
        { x: 31.460172617356413, y: 25.719832546110275, Timestamp: "2021-09-01T12:00:00" },
        { x: 31.91708673877015, y: 30.376014733107528, Timestamp: "2021-09-01T12:00:00" },
        { x: 28.357521750504, y: 29.53939243490555, Timestamp: "2021-09-01T12:00:00" },
        { x: 25.283666681988706, y: 31.60947553746344, Timestamp: "2021-09-01T12:00:00" },
        { x: 31.772351392143364, y: 28.49107887038771, Timestamp: "2021-09-01T12:00:00" },
        { x: 28.221116960320217, y: 29.239109691280063, Timestamp: "2021-09-01T12:00:00" },
        { x: 24.6286603981902, y: 26.439260474246513, Timestamp: "2021-09-01T12:00:00" },
        { x: 27.671121773927485, y: 31.75490642850602, Timestamp: "2021-09-01T12:00:00" },
        { x: 26.436437370821793, y: 29.705907833906906, Timestamp: "2021-09-01T12:00:00" },
        { x: 27.98899890767797, y: 30.017044103601258, Timestamp: "2021-09-01T12:00:00" },
        { x: 24.96654856862608, y: 25.01234435294689, Timestamp: "2021-09-01T12:00:00" },
        { x: 27.74599007272362, y: 30.995229275474784, Timestamp: "2021-09-01T12:00:00" },
        { x: 27.245423137633686, y: 30.618363782000657, Timestamp: "2021-09-01T12:00:00" },
        { x: 29.854169902481168, y: 26.913205346619222, Timestamp: "2021-09-01T12:00:00" },
        { x: 29.577214554263264, y: 28.078481129413237, Timestamp: "2021-09-01T12:00:00" },
        { x: 27.757154735749552, y: 25.113992546188044, Timestamp: "2021-09-01T12:00:00" },
        { x: 28.38297924350259, y: 31.64747939766673, Timestamp: "2021-09-01T12:00:00" },
        { x: 29.698740775308735, y: 27.60676593168603, Timestamp: "2021-09-01T12:00:00" },
        { x: 25.32711690386956, y: 27.6066972407153, Timestamp: "2021-09-01T12:00:00" },
        { x: 25.86566866442535, y: 31.659466496725344, Timestamp: "2021-09-01T12:00:00" },
        { x: 31.515702479185315, y: 28.80333004958952, Timestamp: "2021-09-01T12:00:00" },
        { x: 29.98130782813907, y: 25.963006109041082, Timestamp: "2021-09-01T12:00:00" },
        { x: 30.798686356177996, y: 25.32537059938798, Timestamp: "2021-09-01T12:00:00" },
        { x: 29.58860516993595, y: 29.64483372911509, Timestamp: "2021-09-01T12:00:00" },
        { x: 27.010104559906097, y: 26.81965118195898, Timestamp: "2021-09-01T12:00:00" },
        { x: 24.258273311592834, y: 26.159862605460283, Timestamp: "2021-09-01T12:00:00" },
        { x: 26.694654566772712, y: 28.36022910711396, Timestamp: "2021-09-01T12:00:00" },
        { x: 28.25008901110728, y: 24.250156445531296, Timestamp: "2021-09-01T12:00:00" },
        { x: 25.682066949756937, y: 31.641119812046256, Timestamp: "2021-09-01T12:00:00" },
        { x: 31.351111570072895, y: 25.279326644849014, Timestamp: "2021-09-01T12:00:00" },
        { x: 28.23602892553921, y: 27.094164656453408, Timestamp: "2021-09-01T12:00:00" },
        { x: 25.8465851530438, y: 29.89288224474955, Timestamp: "2021-09-01T12:00:00" },
        { x: 27.270447668190528, y: 31.016956525847405, Timestamp: "2021-09-01T12:00:00" },
        { x: 31.438712500570734, y: 27.9659685507972, Timestamp: "2021-09-01T12:00:00" },
        { x: 28.24137219544732, y: 29.057200761578255, Timestamp: "2021-09-01T12:00:00" },
        { x: 31.149494896257124, y: 24.32511549994917, Timestamp: "2021-09-01T12:00:00" },
        { x: 24.502047534090007, y: 29.626080209378927, Timestamp: "2021-09-01T12:00:00" },
        { x: 25.897491069982703, y: 27.19626801821061, Timestamp: "2021-09-01T12:00:00" },
        { x: 30.58759740068266, y: 26.107867211011882, Timestamp: "2021-09-01T12:00:00" },
        { x: 25.933640168486214, y: 29.724477565804612, Timestamp: "2021-09-01T12:00:00" },
        { x: 26.851161785226857, y: 26.282760281559, Timestamp: "2021-09-01T12:00:00" },
        { x: 30.30885301464868, y: 29.10231317451911, Timestamp: "2021-09-01T12:00:00" },
        { x: 26.826226416342188, y: 31.45585068921335, Timestamp: "2021-09-01T12:00:00" },
        { x: 24.39119979882943, y: 30.848437522377374, Timestamp: "2021-09-01T12:00:00" },
        { x: 30.428185560057205, y: 25.26340984914016, Timestamp: "2021-09-01T12:00:00" },
        { x: 26.170565250029533, y: 28.372308637733703, Timestamp: "2021-09-01T12:00:00" }
    ]

    const testData = [
        { x: 26.352, y: 28.12, Timestamp: "2021-09-01T12:00:00" },
        { x: 24.11, y: 30.042, Timestamp: "2021-09-01T12:00:00" },
        { x: 2.014, y: 7.319, Timestamp: "2021-09-01T12:00:00" },
        { x: 1.208429, y: 3.139, Timestamp: "2021-09-01T12:00:00" },

        // anomalies
        { x: 14.014, y: 7.112, Timestamp: "2021-09-01T12:00:00" },
        { x: 16.014, y: 20.729, Timestamp: "2021-09-01T12:00:00" },
        { x: 18.942, y: 20.4298, Timestamp: "2021-09-01T12:00:00" },
        { x: 33.249, y: 7.319, Timestamp: "2021-09-01T12:00:00" },

    ]

    const anomalies = anomaly.oneClassSvm(trainingData, testData)

    anomalies.forEach(anomaly => {
        console.log(`New anomaly detected. X: ${anomaly.x}, Y: ${anomaly.y}, Timestamp: ${anomaly.timestamp}`)
    })

    // INFO[0000] New anomaly detected. X: 14.014, Y: 7.112, Timestamp:   source=console
    // INFO[0000] New anomaly detected. X: 16.014, Y: 20.729, Timestamp:   source=console
    // INFO[0000] New anomaly detected. X: 18.942, Y: 20.4298, Timestamp:   source=console
    // INFO[0000] New anomaly detected. X: 33.249, Y: 7.319, Timestamp:   source=console
}
