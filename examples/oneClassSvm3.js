import anomaly from 'k6/x/anomaly'


export default function () {
    const trainingData = [
        // sample data from 0 to 8
		{x: 7.232323899210302, Timestamp: "2021-09-01T12:00:00"},
        {x: 1.3760929703372184, Timestamp: "2021-09-01T12:00:00"},
        {x: 4.26841548365681, Timestamp: "2021-09-01T12:00:00"},
        {x: 6.6117488429766205, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.8636524509337296, Timestamp: "2021-09-01T12:00:00"},
        {x: 6.644813248801913, Timestamp: "2021-09-01T12:00:00"},
        {x: 0.2947559828506652, Timestamp: "2021-09-01T12:00:00"},
        {x: 0.2911107267850319, Timestamp: "2021-09-01T12:00:00"},
        {x: 0.05260950229245687, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.3157195601051885, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.568669216869882, Timestamp: "2021-09-01T12:00:00"},
        {x: 1.1441253959658866, Timestamp: "2021-09-01T12:00:00"},
        {x: 7.045316440539194, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.694373656484739, Timestamp: "2021-09-01T12:00:00"},
        {x: 5.725967178435585, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.8562213787791197, Timestamp: "2021-09-01T12:00:00"},
        {x: 7.648260222189629, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.1856433831937956, Timestamp: "2021-09-01T12:00:00"},
        {x: 7.422480067873414, Timestamp: "2021-09-01T12:00:00"},
        {x: 0.8783879335077103, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.6599152528303964, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.5747766542074046, Timestamp: "2021-09-01T12:00:00"},
        {x: 0.05458757321905239, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.2909473954888817, Timestamp: "2021-09-01T12:00:00"},
        {x: 5.46511767795023, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.806700388826391, Timestamp: "2021-09-01T12:00:00"},
        {x: 4.6362598354876, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.199852121027776, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.040413854734549, Timestamp: "2021-09-01T12:00:00"},
        {x: 4.056596096601137, Timestamp: "2021-09-01T12:00:00"},
        {x: 7.13076919616732, Timestamp: "2021-09-01T12:00:00"},
        {x: 7.2378624498743065, Timestamp: "2021-09-01T12:00:00"},
        {x: 6.542592432839374, Timestamp: "2021-09-01T12:00:00"},
        {x: 1.8225073743867508, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.780214468288479, Timestamp: "2021-09-01T12:00:00"},
        {x: 0.6370162920491005, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.893114856347699, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.8306811265514558, Timestamp: "2021-09-01T12:00:00"},
        {x: 4.056072331295095, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.669845755554359, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.4647385789740124, Timestamp: "2021-09-01T12:00:00"},
        {x: 4.645372274141042, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.694536005776225, Timestamp: "2021-09-01T12:00:00"},
        {x: 6.524201172195719, Timestamp: "2021-09-01T12:00:00"},
        {x: 1.3039311869344417, Timestamp: "2021-09-01T12:00:00"},
        {x: 1.4478543527766945, Timestamp: "2021-09-01T12:00:00"},
        {x: 2.3079201604844055, Timestamp: "2021-09-01T12:00:00"},
        {x: 0.8490359519774486, Timestamp: "2021-09-01T12:00:00"},
        {x: 3.7279330760415164, Timestamp: "2021-09-01T12:00:00"},
        {x: 6.180164022373358, Timestamp: "2021-09-01T12:00:00"},

        // sample data from 24 to 32        
        {x: 27.742778638240317, Timestamp: "2021-09-01T12:00:00"},
        {x: 26.838737873477065, Timestamp: "2021-09-01T12:00:00"},
        {x: 28.157644043794033, Timestamp: "2021-09-01T12:00:00"},
        {x: 27.89820085464094, Timestamp: "2021-09-01T12:00:00"},
        {x: 27.809001640027176, Timestamp: "2021-09-01T12:00:00"},
        {x: 28.250000420221532, Timestamp: "2021-09-01T12:00:00"},
        {x: 31.185097122444283, Timestamp: "2021-09-01T12:00:00"},
        {x: 25.85424439814605, Timestamp: "2021-09-01T12:00:00"},
        {x: 30.341831607412516, Timestamp: "2021-09-01T12:00:00"},
        {x: 24.32476402696449, Timestamp: "2021-09-01T12:00:00"},
        {x: 30.224217712064068, Timestamp: "2021-09-01T12:00:00"},
        {x: 28.29983945366521, Timestamp: "2021-09-01T12:00:00"},
        {x: 27.259556944782002, Timestamp: "2021-09-01T12:00:00"},
        {x: 28.614358394001258, Timestamp: "2021-09-01T12:00:00"},
        {x: 24.182353745625527, Timestamp: "2021-09-01T12:00:00"},
        {x: 31.48592650737538, Timestamp: "2021-09-01T12:00:00"},
        {x: 26.64730479965559, Timestamp: "2021-09-01T12:00:00"},
        {x: 31.248702655139713, Timestamp: "2021-09-01T12:00:00"},
        {x: 26.00512909742998, Timestamp: "2021-09-01T12:00:00"},
        {x: 30.713894070878133, Timestamp: "2021-09-01T12:00:00"},
        {x: 28.071294414217814, Timestamp: "2021-09-01T12:00:00"},
        {x: 25.657725792950934, Timestamp: "2021-09-01T12:00:00"},
        {x: 28.628116960694857, Timestamp: "2021-09-01T12:00:00"},
        {x: 29.731394841606885, Timestamp: "2021-09-01T12:00:00"},
        {x: 25.498380817902714, Timestamp: "2021-09-01T12:00:00"},
        {x: 28.837239611137264, Timestamp: "2021-09-01T12:00:00"},
        {x: 25.677521726845903, Timestamp: "2021-09-01T12:00:00"},
        {x: 25.26568715439484, Timestamp: "2021-09-01T12:00:00"},
        {x: 25.28675171972296, Timestamp: "2021-09-01T12:00:00"},
        {x: 27.551109132047912, Timestamp: "2021-09-01T12:00:00"},
        {x: 29.972870458771855, Timestamp: "2021-09-01T12:00:00"},
        {x: 26.300262059752335, Timestamp: "2021-09-01T12:00:00"},
        {x: 24.740960357793316, Timestamp: "2021-09-01T12:00:00"},
        {x: 29.822035749472107, Timestamp: "2021-09-01T12:00:00"},
        {x: 27.755882773631193, Timestamp: "2021-09-01T12:00:00"},
        {x: 28.85566912355458, Timestamp: "2021-09-01T12:00:00"},
        {x: 25.410646400439532, Timestamp: "2021-09-01T12:00:00"},
        {x: 31.14637089438839, Timestamp: "2021-09-01T12:00:00"},
        {x: 27.208593457588442, Timestamp: "2021-09-01T12:00:00"},
        {x: 29.483784337562007, Timestamp: "2021-09-01T12:00:00"},
        {x: 26.297954648210638, Timestamp: "2021-09-01T12:00:00"},
        {x: 27.42978528720591, Timestamp: "2021-09-01T12:00:00"},
        {x: 29.41838346528229, Timestamp: "2021-09-01T12:00:00"},
        {x: 30.05843415290166, Timestamp: "2021-09-01T12:00:00"},
        {x: 24.15028189491572, Timestamp: "2021-09-01T12:00:00"},
        {x: 30.292994538217705, Timestamp: "2021-09-01T12:00:00"},
        {x: 29.7035721866108, Timestamp: "2021-09-01T12:00:00"},
        {x: 30.940547706571927, Timestamp: "2021-09-01T12:00:00"},
        {x: 30.5327699698284, Timestamp: "2021-09-01T12:00:00"},
        {x: 24.45823038462415, Timestamp: "2021-09-01T12:00:00"},
    ]

    const testData = [
        { x: 24.0123, timestamp: "2023-07-17T12:02:00"},
        { x: 6.323, timestamp: "2023-07-17T12:02:00"},
        { x: 2.0246, timestamp: "2023-07-17T12:02:00"},
        { x: 25.43543, timestamp: "2023-07-17T12:02:00"},
        { x: 31.4235, timestamp: "2023-07-17T12:02:00"},
        
        // anomalies
        { x: 33.743, timestamp: "2023-07-17T12:02:00"},
        { x: -2.57, timestamp: "2023-07-17T12:02:00"},
        { x: 14.425, timestamp: "2023-07-17T12:02:00"},
    ]

    const anomalies = anomaly.oneClassSvm(trainingData, testData)

    anomalies.forEach(anomaly => {
        console.log(`New anomaly detected. X: ${anomaly.x}, Timestamp: ${anomaly.timestamp}`)
    })

    // INFO[0000] New anomaly detected. X: 33.743, Timestamp: 2023-07-17T12:02:00  source=console
    // INFO[0000] New anomaly detected. X: -2.57, Timestamp: 2023-07-17T12:02:00  source=console
    // INFO[0000] New anomaly detected. X: 14.425, Timestamp: 2023-07-17T12:02:00  source=console
}
